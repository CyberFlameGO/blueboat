let t=createPrimaryTransaction(),c=data.checks,ok=c.map(e=>t.Get(e[0])).map(e=>base64Encode(e.Wait())).reduce((e,a,s)=>e&&a===c[s][1],!0);if(ok){data.sets.forEach(([a,s])=>{s===null?t.Delete(a):t.Set(a,base64Decode(s))}),data.versionstamped_sets.forEach(([a,s])=>{const r=new Uint8Array(stringToArrayBuffer(a)),n=new Uint8Array(r.length+11);n.set(r),n[r.length]=50,t.SetVersionstampedKey(n.buffer,base64Decode(s),r.length+1)});const e=t.Commit().Wait();output={versionstamp:base64Encode(e.Versionstamp)}}else output=null;
